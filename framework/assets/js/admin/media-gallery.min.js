jQuery(document).ready(function(e){"use strict";var t,l,a={settings:{thumbUl:e("#anva_gallery_thumbs"),thumbLi:e("#anva_gallery_thumbs li")},init:function(){l=this.settings,a.sortableImage(),a.uploadImage(),a.removeThubmanil(),a.removeAllThumbnail(),a.emptyGallery()},sortableImage:function(){l.thumbUl.length>0&&l.thumbUl.sortable({placeholder:"anva-gallery-placeholder",start:function(e,t){t.placeholder.height(t.item.height()-2),t.placeholder.width(t.item.width()-2)}})},uploadImage:function(){e("#anva_gallery_upload_button").on("click",function(l){return l.preventDefault(),t?void t.open():(t=wp.media.frames.frame=wp.media({title:e(this).data("title"),button:{text:e(this).data("text")},library:{type:"image"},multiple:!0}),t.on("select",function(){for(var e=t.state().get("selection").toJSON(),l=e.length,n=0;l>n;n++)a.getThumbnail(e[n].id)}),void t.open())})},removeThubmanil:function(){l.thumbUl.on("click",".anva_gallery_remove",function(t){t.preventDefault(),e(this).parent().fadeOut(100,function(){e(this).remove()}),setTimeout(function(){a.emptyGallery()},500)})},removeAllThumbnail:function(){e("#anva_gallery_remove_all_buttons").on("click",function(t){return t.preventDefault(),0==e("#anva_gallery_thumbs li").length?void alert(ANVA.gallery_empty):(confirm(ANVA.gallery_confirm)&&l.thumbUl.empty(),void a.emptyGallery())})},getThumbnail:function(t,n){n=n||function(){};var i={action:"anva_gallery_get_thumbnail",imageid:t};e("#anva-gallery-spinner").css("visibility","visible"),e.post(ajaxurl,i,function(e){l.thumbUl.append(e),n()}).done(function(){e("#anva-gallery-spinner").css("visibility","hidden"),a.emptyGallery()})},emptyGallery:function(){0==e("#anva_gallery_thumbs li").length?l.thumbUl.addClass("empty"):l.thumbUl.removeClass("empty")}};a.init()});
