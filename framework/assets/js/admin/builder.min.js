JSON.stringify=JSON.stringify||function(t){var e=typeof t;if("object"!=e||null===t)return"string"==e&&(t='"'+t+'"'),String(t);var i,a,n=[],r=t&&t.constructor==Array;for(i in t)a=t[i],e=typeof a,"string"==e?a='"'+a+'"':"object"==e&&null!==a&&(a=JSON.stringify(a)),n.push((r?"":'"'+i+'":')+String(a));return(r?"[":"{")+String(n)+(r?"]":"}")},function(t){var e=jQuery.now();t("#tabs-1 ul li").draggable({connectToSortable:"#content_builder_sort",cursor:"move",revert:"invalid",helper:function(){var i,a=t("#ppb_options"),n=t("#ppb_options_title"),r=t("#ppb_options_image");if(randomId=e,myCheckId=a.val(),myCheckTitle=n.val(),postType=t("#ppb_post_type").val(),myImage=r.val(),""!=myCheckId){var l={};l.id=randomId,l.shortcode=myCheckId,l.ppb_text_title=myCheckTitle,l.ppb_text_content="",l.ppb_header_content="";var o=(JSON.stringify(l),ANVA_VARS.ajaxurl+"?action=pp_ppb&ppb_post_type="+postType+"&shortcode="+myCheckId+"&rel="+randomId);builderItem='<li id="'+randomId+'" class="item item-'+randomId+" "+myCheckId+' ui-state-default one" data-current-size="one">',builderItem+='<div class="actions">',builderItem+='<a href="'+o+'" class="ppb_edit" data-rel="'+randomId+'"></a>',builderItem+='<a href="#" class="ppb_remove"></a>',builderItem+="</div>",builderItem+='<div class="thumbnail">',builderItem+='<img src="'+myImage+'" alt="'+myCheckTitle+'" />',builderItem+="</div>",builderItem+='<div class="title">',builderItem+='<span class="shortcode-type">'+myCheckTitle+"</span>",builderItem+='<span class="shortcode-title"></span>',builderItem+="</div>",builderItem+='<input type="hidden" class="ppb_setting_columns" value="one_fourth"/>',builderItem+='<div class="clear"></div>',builderItem+="</li>",i=builderItem}return i},start:function(t,e){},stop:function(t,e){}}),t("#ppb_export_current_button").on("click",function(){t("#ppb_export_current").val(1)}),t("#ppb_import_current_button").on("click",function(){t("#ppb_import_current").val(1)}),t("#modules_tabs, #export_tabs").tabs({hide:{effect:"fade",duration:400},show:{effect:"fade",duration:400}}),t(".ppb_sortable").sortable({placeholder:"ui-state-highlight",revert:!0}),t(".ppb_sortable").disableSelection();var i=t("#ppb_module_wrapper li");i.on("click",function(e){e.preventDefault(),i.removeClass("selected"),t(this).addClass("selected");var a=t(this).data("module"),n=t(this).data("title"),r=t(this).find("img").attr("src");t("#ppb_options").val(a),t("#ppb_options_title").val(n),t("#ppb_options_image").val(r)}),t("#ppb_sortable_add_button").on("click",function(e){e.preventDefault();var i=t("#ppb_options"),a=t("#ppb_options_title"),n=t("#ppb_options_image");if(randomId=jQuery.now(),myCheckId=i.val(),myCheckTitle=a.val(),postType=t("#ppb_post_type").val(),myImage=n.val(),""!=myCheckId){var r={};r.id=randomId,r.shortcode=myCheckId,r.ppb_text_title=myCheckTitle,r.ppb_text_content="",r.ppb_header_content="";var l=JSON.stringify(r),o=ANVA_VARS.ajaxurl+"?action=pp_ppb&ppb_post_type="+postType+"&shortcode="+myCheckId+"&rel="+randomId;builderItem='<li id="'+randomId+'" class="item-'+myCheckId+' ui-state-default one" data-current-size="one">',builderItem+='<div class="actions">',builderItem+='<a href="'+o+'" class="ppb_edit" data-rel="'+randomId+'"></a>',builderItem+='<a href="#" class="ppb_remove"></a>',builderItem+="</div>",builderItem+='<div class="thumbnail">',builderItem+='<img src="'+myImage+'" alt="'+myCheckTitle+'" />',builderItem+="</div>",builderItem+='<div class="title">',builderItem+='<span class="shortcode-type">'+myCheckTitle+"</span>",builderItem+='<span class="shortcode-title"></span>',builderItem+="</div>",builderItem+='<span class="spinner spinner-'+randomId+'"></span>',builderItem+='<input type="hidden" class="ppb_setting_columns" value="one_fourth"/>',builderItem+='<div class="clear"></div>',builderItem+="</li>",t("#content_builder_sort").append(builderItem),t("#content_builder_sort").removeClass("empty"),t("#"+randomId).data("ppb_setting",l),"ppb_divider"!=myCheckId&&"ppb_empty_line"!=myCheckId&&t("#"+randomId).find(".ppb_edit").trigger("click"),t("html, body").animate({scrollTop:t("#"+randomId).offset().top-32},1e3)}}),t(document).on("click","#content_builder_sort li a.ppb_remove",function(e){e.preventDefault();var i=t(this).parent(".actions").parent("li");confirm("Are you sure you want to delete this item?")&&i.remove()}),t(document).on("click","#content_builder_sort li .actions a.ppb_edit",function(e){e.preventDefault();var i=t(this).parent(".actions").parent("li"),a=i.attr("id"),n=t("#item-inner-"+a);if(0==n.length){t("#ppb_inline_current").attr("value",t(this).attr("data-rel"));var r=t(this).attr("href");i.find("span.spinner").css("visibility","visible");var l=t.ajax({type:"GET",cache:!1,url:r,data:"",success:function(e){i.append('<div id="item-inner-'+a+'" class="item-inner item-inner-'+a+'" style="display:none;">'+e+"</div>"),t("#"+a).addClass("has-inline-content")}});t.when(l).then(function(){t("#item-inner-"+a).slideToggle(),i.find("span.spinner").css("visibility","hidden"),t("#ppb_inline :input").each(function(){"undefined"!=typeof t(this).attr("id")&&t(this).attr("value","")}),t(".colorpicker").wpColorPicker(),t(".rangeslider").change(function(){var e,i;e=t(this),width=e.width(),i=(e.val()-e.attr("min"))/(e.attr("max")-e.attr("min")),e.next("output").text(e.val())}).trigger("change"),t("html, body").animate({scrollTop:t("#"+a).offset().top-32},1e3)})}else t("#item-inner-"+a).slideToggle()}),t(document).on("click",".metabox_upload_btn",function(e){var i="";i=t(this).attr("rel");var a=wp.media.editor.send.attachment;return wp.media.editor.send.attachment=function(e,n){t("#"+i).attr("value",n.url),t('<img src="'+n.url+'" />').insertAfter("#"+i+"_button"),wp.media.editor.send.attachment=a},wp.media.editor.open(),!1}),t("#publish").on("click",function(e){t("#content_builder_sort > li").each(function(){t(this).append('<textarea style="display:none" id="'+t(this).attr("id")+'_data" name="'+t(this).attr("id")+'_data">'+t(this).data("ppb_setting")+"</textarea>"),t(this).append('<input style="display:none" type="text" id="'+t(this).attr("id")+'_size" name="'+t(this).attr("id")+'_size" value="'+t(this).attr("data-current-size")+'"/>')});var i=t("#content_builder_sort").sortable("toArray");t("#ppb_form_data_order").attr("value",i)}),t("body").on("click","#wp-link-submit",function(e){var i=wpLink.getAttrs();return t("#"+wpLink.inputid).val(i.href),wpLink.textarea=t("body"),wpLink.close(),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}),t("body").on("click","#wp-link-cancel, #wp-link-close",function(e){return wpLink.textarea=t("body"),wpLink.close(),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1})}(jQuery);
