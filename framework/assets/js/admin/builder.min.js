function removeSortRecord(e,t){jQuery("li#"+e+"_sort").remove();var a=jQuery("#"+t).sortable("toArray");jQuery("#"+t+"_data").val(a)}function removeSortRecord(e,t){jQuery("li#"+e+"_sort").remove();var a=jQuery("#"+t).sortable("toArray");jQuery("#"+t+"_data").val(a)}function ppbBuildItem(){jQuery("#content_builder_sort li a.ppb_remove").click(function(){jQuery(this).parent("li").remove()}),jQuery("#content_builder_sort li a.ppb_plus").click(function(){var e=jQuery(this).parent("li").attr("data-current-size"),t=jQuery(this).parent("li").prev(),a=t.prev();a.prev();if("one_fourth"==e||"one_fourth last"==e)"one_third"==t.attr("data-current-size")&&"one_third"==a.attr("data-current-size")?(jQuery(this).parent("li").addClass("one_third"),jQuery(this).parent("li").attr("data-current-size","one_third last"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","one_third last")):"two_third"==t.attr("data-current-size")?(jQuery(this).parent("li").addClass("one_third"),jQuery(this).parent("li").attr("data-current-size","one_third last"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","one_third last")):(jQuery(this).parent("li").addClass("one_third"),jQuery(this).parent("li").attr("data-current-size","one_third"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","one_third")),jQuery(this).parent("li").removeClass("one_fourth");else if("one_third"==e||"one_third last"==e)"one_half"==t.attr("data-current-size")?(jQuery(this).parent("li").addClass("one_half"),jQuery(this).parent("li").attr("data-current-size","one_half last"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","one_half last")):(jQuery(this).parent("li").addClass("one_half"),jQuery(this).parent("li").attr("data-current-size","one_half"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","one_half")),jQuery(this).parent("li").removeClass("one_third");else if("one_half"==e||"one_half last"==e)"one_third"==t.attr("data-current-size")?(jQuery(this).parent("li").addClass("two_third"),jQuery(this).parent("li").attr("data-current-size","two_third last"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","two_third last")):(jQuery(this).parent("li").addClass("two_third"),jQuery(this).parent("li").attr("data-current-size","two_third"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","two_third")),jQuery(this).parent("li").removeClass("one_half");else{if("two_third"!=e&&"two_third last"!=e)return"one"==e?!1:!1;jQuery(this).parent("li").addClass("one"),jQuery(this).parent("li").attr("data-current-size","one"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","one"),jQuery(this).parent("li").removeClass("two_third")}var i=jQuery("#content_builder_sort").width(),r=i/4-6-20,n=i/2-6-20,l=i/3-6-20,o=i/3*2-6-20,u=i-6-20;jQuery("#content_builder_sort").find("li.one_fourth").css("width",r+"px"),jQuery("#content_builder_sort").find("li.one_half").css("width",n+"px"),jQuery("#content_builder_sort").find("li.one_third").css("width",l+"px"),jQuery("#content_builder_sort").find("li.two_third").css("width",o+"px"),jQuery("#content_builder_sort").find("li.one").css("width",u+"px")}),jQuery("#content_builder_sort li a.ppb_minus").click(function(){var e=jQuery(this).parent("li").attr("data-current-size"),t=jQuery(this).parent("li").prev(),a=t.prev(),i=a.prev();if("one_fourth"==e||"one_fourth last"==e)return!1;if("one_third"==e||"one_third last"==e)"one_fourth"==t.attr("data-current-size")&&"one_fourth"==a.attr("data-current-size")&&"one_fourth"==i.attr("data-current-size")?(jQuery(this).parent("li").addClass("one_fourth"),jQuery(this).parent("li").attr("data-current-size","one_fourth last"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","one_fourth last")):(jQuery(this).parent("li").addClass("one_fourth"),jQuery(this).parent("li").attr("data-current-size","one_fourth"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","one_fourth")),jQuery(this).parent("li").removeClass("one_third");else if("one_half"==e||"one_half last"==e)"one_third"==t.attr("data-current-size")&&"one_third"==a.attr("data-current-size")?(jQuery(this).parent("li").addClass("one_third"),jQuery(this).parent("li").attr("data-current-size","one_third last"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","one_third last")):(jQuery(this).parent("li").addClass("one_third"),jQuery(this).parent("li").attr("data-current-size","one_third"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","one_third")),jQuery(this).parent("li").removeClass("one_half");else if("two_third"==e||"two_third last"==e)"one_half"==t.attr("data-current-size")?(jQuery(this).parent("li").addClass("one_half"),jQuery(this).parent("li").attr("data-current-size","one_half last"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","one_half last")):(jQuery(this).parent("li").addClass("one_half"),jQuery(this).parent("li").attr("data-current-size","one_half"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","one_half")),jQuery(this).parent("li").removeClass("two_third");else{if("one"!=e)return!1;"one_third"==t.attr("data-current-size")?(jQuery(this).parent("li").addClass("two_third"),jQuery(this).parent("li").attr("data-current-size","two_third last"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","two_third last")):(jQuery(this).parent("li").addClass("two_third"),jQuery(this).parent("li").attr("data-current-size","two_third"),jQuery(this).parent("li").find(".ppb_setting_columns").attr("value","two_third")),jQuery(this).parent("li").removeClass("one")}var r=jQuery("#content_builder_sort").width(),n=r/4-6-20,l=r/2-6-20,o=r/3-6-20,u=r/3*2-6-20,s=r-6-20;jQuery("#content_builder_sort").find("li.one_fourth").css("width",n+"px"),jQuery("#content_builder_sort").find("li.one_half").css("width",l+"px"),jQuery("#content_builder_sort").find("li.one_third").css("width",o+"px"),jQuery("#content_builder_sort").find("li.two_third").css("width",u+"px"),jQuery("#content_builder_sort").find("li.one").css("width",s+"px")}),jQuery(".pp_fancybox").fancybox({maxWidth:700,maxHeight:900,autoSize:!1,closeClick:!1,openEffect:"none",closeEffect:"none",helpers:{overlay:{css:{"background-color":"rgba(0, 0, 0, 0.7)"}}},onCancel:function(e,t){jQuery("textarea.ppb_input").each(function(){tinymce.EditorManager.execCommand("mceRemoveEditor",!1,jQuery(this).attr("id"))}),jQuery("#ppb_inline_current").attr("value","")}}),jQuery("#content_builder_sort li a.ppb_edit").on("click",function(e){e.preventDefault(),jQuery("#ppb_inline_current").attr("value",jQuery(this).attr("data-rel")),jQuery.fancybox.showLoading();var t=jQuery(this).attr("href");return jQuery.ajax({type:"GET",cache:!1,url:t,data:"",success:function(e){jQuery.fancybox(e,{fitToView:!1,width:800,autoSize:!1,autoResize:!0,autoHeight:!0,closeClick:!1,openEffect:"none",closeEffect:"none",beforeClose:function(e,t){jQuery("textarea.ppb_input").each(function(){tinymce.EditorManager.execCommand("mceRemoveEditor",!1,jQuery(this).attr("id"))}),jQuery("#ppb_inline_current").attr("value","")}})}}),!1})}JSON.stringify=JSON.stringify||function(e){var t=typeof e;if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var a,i,r=[],n=e&&e.constructor==Array;for(a in e)i=e[a],t=typeof i,"string"==t?i='"'+i+'"':"object"==t&&null!==i&&(i=JSON.stringify(i)),r.push((n?"":'"'+a+'":')+String(i));return(n?"[":"{")+String(r)+(n?"]":"}")},jQuery(document).ready(function(){jQuery("#current_sidebar li a.sidebar_del").click(function(){return confirm("Are you sure you want to delete this sidebar? (this can not be undone)")&&(sTarget=jQuery(this).attr("href"),sSidebar=jQuery(this).attr("rel"),objTarget=jQuery(this).parent("li"),jQuery.ajax({type:"POST",url:sTarget,data:"sidebar_id="+sSidebar,success:function(e){objTarget.fadeOut(),setTimeout(function(){location.reload()},1e3)}})),!1}),jQuery("#current_ggfont li a.ggfont_del").click(function(){return confirm("Are you sure you want to delete this font? (this can not be undone)")&&(sTarget=jQuery(this).attr("href"),sGGFont=jQuery(this).attr("rel"),objTarget=jQuery(this).parent("li"),jQuery.ajax({type:"POST",url:sTarget,data:"ggfont="+sGGFont,success:function(e){objTarget.fadeOut(),setTimeout(function(){location.reload()},1e3)}})),!1}),jQuery("a.image_del").click(function(){return confirm("Are you sure you want to delete this image? (this can not be undone)")&&(sTarget=jQuery(this).attr("href"),sFieldId=jQuery(this).attr("rel"),objTarget=jQuery("#"+sFieldId+"_wrapper"),jQuery.ajax({type:"POST",url:sTarget,data:"field_id="+sFieldId,success:function(e){objTarget.fadeOut(),jQuery("#"+sFieldId).val("")}})),!1}),jQuery("#pp_export_current_button").on("click",function(){jQuery("#pp_export_current").val(1)}),jQuery("#ppb_export_current_button").on("click",function(){jQuery("#ppb_export_current").val(1)}),jQuery("#ppb_import_current_button").on("click",function(){jQuery("#ppb_import_current").val(1)}),jQuery("#import_demo li").on("click",function(){jQuery("#import_demo li").removeClass("selected"),jQuery(this).addClass("selected");var e=jQuery(this).data("demo");jQuery("#pp_import_customize_demo").val(e)}),jQuery("#pp_import_customize_button").on("click",function(){jQuery("#pp_import_customize").val(1)}),jQuery("#current_sidebar li a.sidebar_del").click(function(){return confirm("Are you sure you want to delete this sidebar? (this can not be undone)")&&(sTarget=jQuery(this).attr("href"),sSidebar=jQuery(this).attr("rel"),objTarget=jQuery(this).parent("li"),jQuery.ajax({type:"POST",url:sTarget,data:"sidebar_id="+sSidebar,success:function(e){objTarget.fadeOut()}})),!1}),jQuery("#pp_advance_clear_cache").click(function(){return confirm("Are you sure you want to clear all cache")&&(sTarget=jQuery(this).attr("href"),jQuery.ajax({type:"POST",url:sTarget,data:"method=clear_cache",success:function(e){jQuery("#pp_advance_clear_cache").html("Successfully cleared. Click here to clear cache files again")}})),!1}),jQuery("#pp_panel a").click(function(){return jQuery("#pp_panel a").removeClass("nav-tab-active"),jQuery(this).addClass("nav-tab-active"),jQuery(".rm_section").css("display","none"),jQuery(jQuery(this).attr("href")).fadeIn(),jQuery("#current_tab").val(jQuery(this).attr("href")),!1}),jQuery(".color_picker").each(function(){var e=jQuery(this).attr("id");jQuery(this).ColorPicker({color:jQuery(this).val(),onShow:function(e){return jQuery(e).fadeIn(200),!1},onHide:function(e){return jQuery(e).fadeOut(200),!1},onChange:function(t,a,i,r){jQuery("#"+e).val("#"+a),jQuery("#"+e+"_bg").css("backgroundColor","#"+a)}}),jQuery(this).css("width","200px"),jQuery(this).css("float","left")}),jQuery(".rm_section").css("display","none"),""!=self.document.location.hash?(jQuery("html, body").animate({scrollTop:0},"fast"),jQuery(".nav-tab").removeClass("nav-tab-active"),jQuery("a"+self.document.location.hash+"_a").addClass("nav-tab-active"),jQuery("div"+self.document.location.hash).css("display","block"),jQuery("#current_tab").val(self.document.location.hash)):jQuery("div#pp_panel_general").css("display","block"),jQuery(".pp_sortable").sortable({placeholder:"ui-state-highlight",create:function(e,t){myCheckRel=jQuery(this).attr("rel");var a=jQuery(this).sortable("toArray");jQuery("#"+myCheckRel).val(a)},update:function(e,t){myCheckRel=jQuery(this).attr("rel");var a=jQuery(this).sortable("toArray");jQuery("#"+myCheckRel).val(a)}}),jQuery(".pp_sortable").disableSelection(),jQuery(".pp_checkbox input").change(function(){myCheckId=jQuery(this).val(),myCheckRel=jQuery(this).attr("rel"),myCheckTitle=jQuery(this).attr("alt"),jQuery(this).is(":checked")?jQuery("#"+myCheckRel).append('<li id="'+myCheckId+'_sort" class="ui-state-default">'+myCheckTitle+"</li>"):jQuery("#"+myCheckId+"_sort").remove();var e=jQuery("#"+myCheckRel).sortable("toArray");jQuery("#"+myCheckRel+"_data").val(e)}),jQuery(".pp_sortable_button").click(function(){var e=jQuery("#"+jQuery(this).attr("data-rel"));if(myCheckId=e.find("option:selected").val(),myCheckRel=e.find("option:selected").attr("data-rel"),myCheckTitle=e.find("option:selected").attr("title"),0==jQuery("#"+myCheckRel).children("li#"+myCheckId+"_sort").length){jQuery("#"+myCheckRel).append('<li id="'+myCheckId+'_sort" class="ui-state-default"><div class="title">'+myCheckTitle+'</div><a data-rel="'+myCheckRel+'" href="javascript:removeSortRecord(\''+myCheckId+"', '"+myCheckRel+'\');" class="remove">x</a><br style="clear:both"/></li>');var t=jQuery("#"+myCheckRel).sortable("toArray");jQuery("#"+myCheckRel+"_data").val(t)}else alert('You have already added "'+myCheckTitle+'"')}),jQuery(".pp_sortable li a.remove").click(function(){jQuery(this).parent("li").remove();var e=jQuery("#"+jQuery(this).attr("data-rel")).sortable("toArray");jQuery("#"+jQuery(this).attr("data-rel")+"_data").val(e)}),jQuery(".pp_font").change(function(){var e=jQuery(this).data("value"),t=jQuery(this).data("sample");jQuery("#"+e).attr("value",jQuery(this).children("option:selected").attr("data-family"));var a="http://fonts.googleapis.com/css?family="+jQuery(this).val();jQuery("head").append('<link rel="stylesheet" id="google_fonts_'+e+'" href="'+a+'" type="text/css" media="all">'),""!=jQuery(this).children("option:selected").attr("data-family")&&jQuery("#"+t).css("font-family",'"'+jQuery(this).children("option:selected").attr("data-family")+'"')}),jQuery(".pp_font").each(function(){jQuery(this).trigger("change")}),jQuery("#ppb_tab").tabs(),jQuery("#meta_tab").tabs();var e="";jQuery(".metabox_upload_btn").on("click",function(){jQuery(".fancybox-overlay").css("visibility","hidden"),jQuery(".fancybox-wrap").css("visibility","hidden"),e=jQuery(this).attr("rel");var t=wp.media.editor.send.attachment;return wp.media.editor.send.attachment=function(a,i){jQuery("#"+e).attr("value",i.url),wp.media.editor.send.attachment=t,jQuery(".fancybox-overlay").css("visibility","visible"),jQuery(".fancybox-wrap").css("visibility","visible")},wp.media.editor.open(),!1}),jQuery("input.upload_text").on("click",function(){jQuery(this).select()});var t=jQuery("#content_builder_sort").width(),a=t/4-6-20,i=t/2-6-20,r=t/3-6-20,n=t/3*2-6-20,l=t-6-20;jQuery("#content_builder_sort").find("li.one_fourth").css("width",a+"px"),jQuery("#content_builder_sort").find("li.one_half").css("width",i+"px"),jQuery("#content_builder_sort").find("li.one_third").css("width",r+"px"),jQuery("#content_builder_sort").find("li.two_third").css("width",n+"px"),jQuery("#content_builder_sort").find("li.one").css("width",l+"px"),jQuery(window).resize(function(){var e=jQuery("#content_builder_sort").width(),t=e/4-6-20,a=e/2-6-20,i=e/3-6-20,r=e/3*2-6-20,n=e-6-20;jQuery("#content_builder_sort").find("li.one_fourth").css("width",t+"px"),jQuery("#content_builder_sort").find("li.one_half").css("width",a+"px"),jQuery("#content_builder_sort").find("li.one_third").css("width",i+"px"),jQuery("#content_builder_sort").find("li.two_third").css("width",r+"px"),jQuery("#content_builder_sort").find("li.one").css("width",n+"px")}),ppbBuildItem(),jQuery("#ppb_sortable_add_button").on("click",function(){var e=jQuery("#ppb_options"),t=jQuery("#ppb_options_title");if(randomId=jQuery.now(),myCheckId=e.val(),myCheckTitle=t.val(),postType=jQuery("#ppb_post_type").val(),""!=myCheckId){var a={};a.id=randomId,a.shortcode=myCheckId,a.ppb_text_title=myCheckTitle,a.ppb_text_content="",a.ppb_header_content="";var i=JSON.stringify(a);builderItem='<li id="'+randomId+'" class="ui-state-default one '+myCheckId+'" data-current-size="one">',builderItem+='<div class="title">'+myCheckTitle+"</div>",builderItem+='<a href="javascript:;" class="ppb_remove">x</a>';var r=tgAjax.ajaxurl+"?action=pp_ppb&ppb_post_type="+postType+"&shortcode="+myCheckId+"&rel="+randomId+"&width=800&height=900";builderItem+='<a data-rel="'+randomId+'" href="'+r+'" class="thickbox ppb_edit"></a>',builderItem+='<input type="hidden" class="ppb_setting_columns" value="one_fourth"/>',builderItem+="</li>",jQuery("#content_builder_sort").append(builderItem),jQuery("#content_builder_sort").removeClass("empty"),ppbBuildItem(),jQuery("#"+randomId).data("ppb_setting",i);var n=jQuery("#"+randomId).prev(),l=n.prev();l.prev();"one_third"==n.attr("data-current-size")&&"one_third"==l.attr("data-current-size")&&(jQuery("#"+randomId).attr("data-current-size","one_third last"),jQuery("#"+randomId).find(".ppb_setting_columns").attr("value","one_third last")),"ppb_divider"!=myCheckId&&"ppb_empty_line"!=myCheckId&&jQuery("#"+randomId).find(".ppb_edit").trigger("click")}return!1}),jQuery("#publish").on("click",function(){jQuery("#content_builder_sort > li").each(function(){jQuery(this).append('<textarea style="display:none" id="'+jQuery(this).attr("id")+'_data" name="'+jQuery(this).attr("id")+'_data">'+jQuery(this).data("ppb_setting")+"</textarea>"),jQuery(this).append('<input style="display:none" type="text" id="'+jQuery(this).attr("id")+'_size" name="'+jQuery(this).attr("id")+'_size" value="'+jQuery(this).attr("data-current-size")+'"/>')});var e=jQuery("#content_builder_sort").sortable("toArray");jQuery("#ppb_form_data_order").attr("value",e)}),jQuery(".ppb_sortable").sortable({start:function(e,t){},stop:function(e,t){}}),jQuery(".ppb_sortable").disableSelection(),jQuery("#ppb_enable").on("ifToggled",function(e){jQuery(this).on("ifChecked",function(e){jQuery("#postdivrich").hide(),jQuery("#preview-action").hide()}),jQuery(this).on("ifUnchecked",function(e){jQuery("#postdivrich").show(),jQuery("#preview-action").show()})}),jQuery("#ppb_module_wrapper li").click(function(){jQuery("#ppb_module_wrapper li").removeClass("selected"),jQuery(this).addClass("selected");var e=jQuery(this).data("module"),t=jQuery(this).data("title");jQuery("#ppb_options").val(e),jQuery("#ppb_options_title").val(t)}),jQuery("#pp_theme_go_update_bth").click(function(){if(update_true=confirm("Are you sure to update the theme?"),0==update_true)return!1;jQuery(".update_message").show(),jQuery(this).hide();var e={action:"pp_update_theme"};return jQuery.post(ajaxurl,e,function(e){jQuery(".update_message").html('<div class="update_message_success">'+e+"</div>")}),!1}),jQuery("body").on("click",".metabox_link_btn",function(e){return wpActiveEditor=!0,wpLink.inputid=jQuery(this).attr("rel"),wpLink.open(),!1}),jQuery("body").on("click","#wp-link-submit",function(e){var t=wpLink.getAttrs();return jQuery("#"+wpLink.inputid).val(t.href),wpLink.textarea=jQuery("body"),wpLink.close(),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}),jQuery("body").on("click","#wp-link-cancel, #wp-link-close",function(e){return wpLink.textarea=jQuery("body"),wpLink.close(),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}),jQuery("#pp_import_default_button").on("click",function(){jQuery("#pp_import_default").val(1)}),jQuery("#import_demo_content li").on("click",function(){jQuery("#import_demo_content li").removeClass("selected"),jQuery(this).addClass("selected");var e=jQuery(this).data("demo");jQuery("#pp_import_demo_content").val(e)}),jQuery("#pp_import_content_button").on("click",function(){if(""==jQuery("#pp_import_demo_content").val())return alert("Please select demo content you want to import"),!1;if(import_true=confirm("Are you sure to import demo content? it will overwrite the existing data"),0!=import_true){jQuery(".import_message").show(),jQuery(this).hide();var e={action:"pp_import_demo_content",demo:jQuery("#pp_import_demo_content").val()};jQuery.post(ajaxurl,e,function(e){jQuery(".import_message").html('<div class="import_message_success">'+e+"</div>")})}}),jQuery("#ppb_module_wrapper li").on("click",function(){jQuery("#ppb_module_wrapper li").removeClass("selected"),jQuery(this).addClass("selected");var e=jQuery(this).data("module"),t=jQuery(this).data("title");jQuery("#ppb_options").val(e),jQuery("#ppb_options_title").val(t)})});
