JSON.stringify=JSON.stringify||function(t){var e=typeof t;if("object"!=e||null===t)return"string"==e&&(t='"'+t+'"'),String(t);var i,a,n=[],r=t&&t.constructor==Array;for(i in t)a=t[i],e=typeof a,"string"==e?a='"'+a+'"':"object"==e&&null!==a&&(a=JSON.stringify(a)),n.push((r?"":'"'+i+'":')+String(a));return(r?"[":"{")+String(n)+(r?"]":"}")},function(t){var e=jQuery.now();t("#tabs-1 ul li").draggable({connectToSortable:"#builder-sortable-items",cursor:"move",revert:"invalid",helper:function(){var i,a=t("#anva_options"),n=t("#anva_options_title"),r=t("#anva_options_image");if(randomId=e,myCheckId=a.val(),myCheckTitle=n.val(),postType=t("#anva_post_type").val(),myImage=r.val(),""!=myCheckId){var l={};l.id=randomId,l.shortcode=myCheckId,l.ppb_text_title=myCheckTitle,l.ppb_text_content="",l.ppb_header_content="";var s=(JSON.stringify(l),ANVA.ajaxurl+"?action=pp_ppb&ppb_post_type="+$postType+"&shortcode="+myCheckId+"&rel="+$randomId);builderItem='<li id="'+randomId+'" class="item item-'+$randomId+" "+myCheckId+' ui-state-default one" data-current-size="one">',builderItem+='<div class="actions">',builderItem+='<a href="'+s+'" class="button-edit" data-rel="'+$randomId+'"></a>',builderItem+='<a href="#" class="button-remove"></a>',builderItem+="</div>",builderItem+='<div class="thumbnail">',builderItem+='<img src="'+myImage+'" alt="'+myCheckTitle+'" />',builderItem+="</div>",builderItem+='<div class="title">',builderItem+='<span class="shortcode-type">'+myCheckTitle+"</span>",builderItem+='<span class="shortcode-title"></span>',builderItem+="</div>",builderItem+='<input type="hidden" class="ppb_setting_columns" value="one_fourth"/>',builderItem+='<div class="clear"></div>',builderItem+="</li>",i=builderItem}return i},start:function(t,e){},stop:function(t,e){}}),t(".tooltip").tooltipster({animation:"grow",delay:200,maxWidth:200,theme:"tooltipster-light",touchDevices:!0,trigger:"hover"}),t("#elements-tabs, #export-tabs").tabs({hide:{effect:"fade",duration:400},show:{effect:"fade",duration:400}}),t(".builder-sortable-items").sortable({handle:".thumbnail",placeholder:"ui-state-highlight",revert:!1}),t(".builder-sortable-items .thumbnail").disableSelection();var i=t(".builder-elements li");i.on("click",function(e){e.preventDefault(),i.removeClass("selected"),t(this).addClass("selected");var a=t(this).data("element"),n=t(this).data("title"),r=t(this).find("img").attr("src");t("#anva_options").val(a),t("#anva_options_title").val(n),t("#anva_options_image").val(r)}),t("#add-builder-item").on("click",function(e){if(e.preventDefault(),""==t("#anva_options").val())return alert(ANVA.builder_empty_options),!1;var i=jQuery.now(),a=t("#anva_options").val(),n=t("#anva_options_title").val(),r=t("#anva_options_image").val(),l=t("#anva_post_type").val();if(""!=a){var s={};s.id=i,s.shortcode=a,s.text_title=n,s.text_content="",s.header_content="";var o=JSON.stringify(s),d=ANVA.ajaxurl+"?action=pp_ppb&ppb_post_type="+l+"&shortcode="+a+"&rel="+i;builderItem='<li id="'+i+'" class="item item-'+i+" "+a+' ui-state-default" data-current-size="one">',builderItem+='<div class="actions">',builderItem+='<a href="'+d+'" class="button-edit" data-rel="'+i+'"></a>',builderItem+='<a href="#" class="button-remove"></a>',builderItem+="</div>",builderItem+='<div class="thumbnail">',builderItem+='<img src="'+r+'" alt="'+n+'" />',builderItem+="</div>",builderItem+='<div class="title">',builderItem+='<span class="shortcode-type">'+n+"</span>",builderItem+='<span class="shortcode-title"></span>',builderItem+="</div>",builderItem+='<span class="spinner spinner-'+i+'"></span>',builderItem+='<input type="hidden" class="ppb_setting_columns" value="one_fourth"/>',builderItem+='<div class="clear"></div>',builderItem+="</li>",t("#builder-sortable-items").append(builderItem),t("#builder-sortable-items").removeClass("empty"),t("#"+i).data("anva_builder_settings",o),"divider"!=a&&"empty_line"!=a&&t("#"+i).find(".button-edit").trigger("click"),t("html, body").animate({scrollTop:t("#"+i).offset().top-32},1e3)}}),t(document).on("click","#builder-sortable-items li a.button-remove",function(e){e.preventDefault();var i=t(this).parent(".actions").parent("li");confirm("Are you sure you want to delete this item?")&&(i.remove(),setTimeout(function(){0==t("#builder-sortable-items li").length&&t("#builder-sortable-items").addClass("empty")},500))}),t(document).on("click","#builder-sortable-items li .actions a.button-edit",function(e){e.preventDefault();var i=t(this).parent(".actions").parent("li"),a=i.attr("id"),n=t("#item-inner-"+a);if(0==n.length){t("#anva_inline_current").attr("value",t(this).attr("data-rel"));var r=t(this).attr("href");i.find("span.spinner").css("visibility","visible");var l=t.ajax({type:"GET",cache:!1,url:r,data:"",success:function(e){i.append('<div id="item-inner-'+a+'" class="item-inner item-inner-'+a+'" style="display:none;">'+e+"</div>"),t("#"+a).addClass("has-inline-content")}});t.when(l).then(function(){t("#item-inner-"+a).slideToggle(),i.find("span.spinner").css("visibility","hidden"),t("#ppb_inline :input").each(function(){"undefined"!=typeof t(this).attr("id")&&t(this).attr("value","")}),t(".colorpicker").wpColorPicker(),t(".rangeslider").change(function(){var e,i;e=t(this),width=e.width(),i=(e.val()-e.attr("min"))/(e.attr("max")-e.attr("min")),e.next("output").text(e.val())}).trigger("change"),t(".builder-sortable-items").enableSelection(),t("html, body").animate({scrollTop:t("#"+a).offset().top-32},1e3)})}else t("#item-inner-"+a).slideToggle()}),t(document).on("click",".metabox_upload_btn",function(e){var i="";i=t(this).attr("rel");var a=wp.media.editor.send.attachment;return wp.media.editor.send.attachment=function(e,n){t("#"+i).attr("value",n.url),t('<img src="'+n.url+'" />').insertAfter("#"+i+"_button"),wp.media.editor.send.attachment=a},wp.media.editor.open(),!1}),t("#publish").on("click",function(e){t("#builder-sortable-items > li").each(function(){t(this).append('<textarea style="display:none" id="'+t(this).attr("id")+'_data" name="'+t(this).attr("id")+'_data">'+t(this).data("anva_builder_settings")+"</textarea>"),t(this).append('<input style="display:none" type="text" id="'+t(this).attr("id")+'_size" name="'+t(this).attr("id")+'_size" value="'+t(this).attr("data-current-size")+'"/>')});var i=t("#builder-sortable-items").sortable("toArray");t("#anva_form_data_order").attr("value",i)}),t("body").on("click","#wp-link-submit",function(e){var i=wpLink.getAttrs();return t("#"+wpLink.inputid).val(i.href),wpLink.textarea=t("body"),wpLink.close(),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}),t("body").on("click","#wp-link-cancel, #wp-link-close",function(e){return wpLink.textarea=t("body"),wpLink.close(),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1})}(jQuery);
