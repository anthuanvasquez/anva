jQuery(document).ready(function(e){"use strict";var t,n,a={init:function(){e(".remove-image, .remove-file").on("click",function(){a.mediaRemoveFile(e(this).closest(".section"))}),e(".upload-button").click(function(t){a.mediaAddFile(t,e(this).closest(".section"))}),e(".section-upload, .section-background").each(function(){var t=e(this),n=t.find(".screenshot"),a=n.find("img");a.length>0&&n.addClass("has-image")})},mediaAddFile:function(i,o){var s=e(this);e(".uploaded-file");n=o,i.preventDefault(),t?t.open():(t=wp.media.frames.mediaUpload=wp.media({title:s.data("choose"),button:{text:s.data("update"),close:!1}}),t.on("select",function(){var i=t.state().get("selection").first();t.close(),n.find(".upload").val(i.attributes.url),"image"===i.attributes.type&&n.find(".screenshot").empty().hide().append('<img src="'+i.attributes.url+'"><a class="remove-image">X</a>').slideDown("fast").addClass("has-image"),n.find(".upload-button").unbind().addClass("remove-file").removeClass("upload-button").val(anvaMediaJs.remove),n.find(".anva-background-properties").slideDown(),n.find(".remove-image, .remove-file").on("click",function(){a.mediaRemoveFile(e(this).parents(".section"))})})),t.open()},mediaRemoveFile:function(t){t.find(".remove-image").hide(),t.find(".upload").val(""),t.find(".anva-background-properties").hide(),t.find(".screenshot").slideUp().removeClass("has-image"),t.find(".remove-file").unbind().addClass("upload-button").removeClass("remove-file").val(anvaMediaJs.upload),e(".section-upload .upload-notice").length>0&&e(".upload-button").remove(),t.find(".upload-button").on("click",function(t){a.mediaAddFile(t,e(this).closest(".section"))})}};a.init()});
