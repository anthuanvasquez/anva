jQuery(document).ready(function(t){"use strict";function n(n,o){var s=(t(".uploaded-file"),t(this));i=o,n.preventDefault(),a?a.open():(a=wp.media.frames.anva_media_upload=wp.media({title:s.data("choose"),button:{text:s.data("update"),close:!1}}),a.on("select",function(){var n=a.state().get("selection").first();a.close(),i.find(".upload").val(n.attributes.url),"image"==n.attributes.type&&i.find(".screenshot").empty().hide().append('<img src="'+n.attributes.url+'"><a class="remove-image">X</a>').slideDown("fast").addClass("has-image"),i.find(".upload-button").unbind().addClass("remove-file").removeClass("upload-button").val(anvaMediaJs.remove),i.find(".anva-background-properties").slideDown(),i.find(".remove-image, .remove-file").on("click",function(){e(t(this).parents(".section"))})})),a.open()}function e(e){e.find(".remove-image").hide(),e.find(".upload").val(""),e.find(".anva-background-properties").hide(),e.find(".screenshot").slideUp().removeClass("has-image"),e.find(".remove-file").unbind().addClass("upload-button").removeClass("remove-file").val(anvaMediaJs.upload),t(".section-upload .upload-notice").length>0&&t(".upload-button").remove(),e.find(".upload-button").on("click",function(e){n(e,t(this).closest(".section"))})}var a,i;t(".remove-image, .remove-file").on("click",function(){e(t(this).closest(".section"))}),t(".upload-button").click(function(e){n(e,t(this).closest(".section"))}),t(".section-upload, .section-background").each(function(){var n=t(this),e=n.find(".screenshot"),a=e.find("img");a.length>0&&e.addClass("has-image")})});
