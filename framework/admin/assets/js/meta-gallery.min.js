jQuery(document).ready(function(e){"use strict";var t,a,n={settings:{thumbUl:e("#anva_gallery_thumbs"),thumbLi:e("#anva_gallery_thumbs li")},init:function(){a=this.settings,n.sortableImage(),n.uploadImage(),n.removeThubmanil(),n.removeAllThumbnail(),n.emptyGallery()},sortableImage:function(){a.thumbUl.length>0&&a.thumbUl.sortable({placeholder:"anva-gallery-placeholder",start:function(e,t){t.placeholder.height(t.item.height()-2),t.placeholder.width(t.item.width()-2)}})},uploadImage:function(){e("#anva_gallery_upload_button").on("click",function(a){return a.preventDefault(),t?void t.open():(t=wp.media.frames.frame=wp.media({title:e(this).data("title"),button:{text:e(this).data("text")},library:{type:"image"},multiple:!0}),t.on("select",function(){for(var e=t.state().get("selection").toJSON(),a=e.length,i=0;a>i;i++)n.getThumbnail(e[i].id)}),void t.open())})},removeThubmanil:function(){a.thumbUl.on("click",".anva_gallery_remove",function(t){t.preventDefault(),e(this).parent().fadeOut(100,function(){e(this).remove()}),setTimeout(function(){n.emptyGallery()},500)})},removeAllThumbnail:function(){e("#anva_gallery_remove_all_buttons").on("click",function(t){return t.preventDefault(),0==e("#anva_gallery_thumbs li").length?void alert(anvaJs.gallery_empty):(confirm(anvaJs.gallery_confirm)&&a.thumbUl.empty(),void n.emptyGallery())})},getThumbnail:function(t,i){i=i||function(){};var l={action:"anva_gallery_get_thumbnail",imageid:t};e("#anva-gallery-spinner").css("visibility","visible"),e.post(ajaxurl,l,function(e){a.thumbUl.append(e),i()}).done(function(){e("#anva-gallery-spinner").css("visibility","hidden"),n.emptyGallery()})},emptyGallery:function(){0==e("#anva_gallery_thumbs li").length?a.thumbUl.addClass("empty"):a.thumbUl.removeClass("empty")}};n.init()});
