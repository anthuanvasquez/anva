jQuery(document).ready(function(t){"use strict";var n,e,a={settings:{thumbUl:t("#anva_gallery_thumbs"),thumbLi:t("#anva_gallery_thumbs li")},init:function(){e=this.settings,a.sortableImage(),a.uploadImage(),a.removeThubmanil(),a.removeAllThumbnail(),a.emptyGallery()},sortableImage:function(){e.thumbUl.length>0&&e.thumbUl.sortable({placeholder:"anva-gallery-placeholder",start:function(t,n){n.placeholder.height(n.item.height()-2),n.placeholder.width(n.item.width()-2)}})},uploadImage:function(){t("#anva_gallery_upload_button").on("click",function(e){return e.preventDefault(),n?void n.open():(n=wp.media.frames.frame=wp.media({title:t(this).data("title"),button:{text:t(this).data("text")},library:{type:"image"},multiple:!0}),n.on("select",function(){for(var t=n.state().get("selection").toJSON(),e=t.length,i=0;e>i;i++)a.getThumbnail(t[i].id)}),void n.open())})},removeThubmanil:function(){e.thumbUl.on("click",".anva_gallery_remove",function(n){n.preventDefault(),t(this).parent().fadeOut(100,function(){t(this).remove()}),setTimeout(function(){a.emptyGallery()},500)})},removeAllThumbnail:function(){t("#anva_gallery_remove_all_buttons").on("click",function(n){return n.preventDefault(),0==t("#anva_gallery_thumbs li").length?void alert(anvaJs.gallery_empty):(confirm(anvaJs.gallery_confirm)&&e.thumbUl.empty(),void a.emptyGallery())})},getThumbnail:function(n,i){i=i||function(){};var o={action:"anva_gallery_get_thumbnail",imageid:n};t("#anva-gallery-spinner").css("visibility","visible"),t.post(ajaxurl,o,function(t){e.thumbUl.append(t),i()}).done(function(){t("#anva-gallery-spinner").css("visibility","hidden"),a.emptyGallery()})},emptyGallery:function(){0==t("#anva_gallery_thumbs li").length?e.thumbUl.addClass("empty"):e.thumbUl.removeClass("empty")}};a.init()});
